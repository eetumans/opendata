---


solr_host: "{{ database_host }}"
solr_port: "8983"

redis_hostname: "{{ database_host }}"
redis_port: "6379"


ckan_test_database: { 'name': "ckan_test", 'username': "{{ ckan_database_username }}" }




www_root: /var/www
www_user: www-data
www_group: www-data



server_path: /srv/ytp
cache_path: "{{ server_path }}/cache"
backup_path: "{{ server_path }}/backup"
scripts_path: "{{ server_path }}/scripts"
log_path: /var/log/ckan
static_path: "{{ www_root }}/static"

resource_cache_path: "{{ server_path }}/resource_cache"

files_root: "{{ server_path }}/files"

all_paths:
  - "{{ server_path }}"
  - "{{ cache_path }}"
  - "{{ backup_path }}"
  - "{{ scripts_path }}"
  - "{{ log_path }}"
  - "{{ static_path }}"

hostname: 10.10.10.10
hostname_language: fi
secondary_hostname: 127.0.0.1
secondary_hostname_language: en
base_hostname: ""
secondary_base_hostname: ""

drupal_editor_rolename: editor
drupal_publisher_rolename: publisher
drupal_ckan_admin_rolename: ckan_admin

admin: {'username' : 'admin', 'password': 'admin', 'email': 'vagrant@localhost'}

harvest_user: {'username' : 'harvest', 'password': 'harvester', 'email': 'harvest@localhost'}

ytp_users:
  - username: 'test-editor'
    password: 'test-editor'
    email: 'editor@localhost'
  - username: 'test-publisher'
    password: 'test-publisher'
    email: 'publisher@localhost'
  - username: 'test-user'
    password: 'test-user'
    email: 'user@localhost'

drupal_roles:
  - { 'username': "{{ admin.username }}", 'role': "{{ drupal_ckan_admin_rolename }}" }
  - { 'username': "test-editor", 'role': "{{ drupal_editor_rolename }}" }
  - { 'username': "test-editor", 'role': "{{ drupal_ckan_admin_rolename }}" }
  - { 'username': "test-publisher", 'role': "{{ drupal_publisher_rolename }}" }

ckan_admins:
  - "{{ admin.username }}"
  - "{{ harvest_user.username }}"
  - "test-editor"

ckan_ini: /etc/ckan/default/production.ini
virtual_environment: /usr/lib/ckan/default
datapusherenv: /usr/lib/ckan/datapusher
ckan_who_ini: /etc/ckan/default/who.ini

harvest_sources: false

ckan_version: "2.8.2"
ckan_branch: "ckan-{{ ckan_version }}"

email_domain: "{{ hostname }}"
email_from: "no-reply@{{ email_domain }}"
error_email_from: "error@{{ email_domain }}"

admin_email: vagrant@localhost
error_email: "{{ admin_email }}"
client_email: vagrant@localhost

#smtp_server key is required by the external ckan mailer component
smtp_server_domain: "{{ smtp.server_domain }}"

google_analytics: false
# enable: google_analytics: { 'id': "", 'account': "", 'username': "", 'password': "", 'type': "" }
certificates_path: "/etc/ssl/opendata"

basic_auth_path: false
nfs_shared_path: "/srv/ytp/shared"
local_cache: "/tmp/ytp/cache"

import_base_organizations: false
import_finto_tags: false

recaptcha_public_key: "6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"
recaptcha_private_key: "6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe"

Reindex: false

show_postit_demo: true


postgres:
  users:
    ckan:
      username: ckan_default
      password: "{{ secret.database_ckan_password }}"
    ckan_datastore:
      username: datastore_default
      password: "{{ secret.database_ckan_datastore_password }}"
    drupal:
      username: drupal
      password: "{{ secret.database_drupal_password }}"
    drupal8:
      username: drupal8
      password: "{{ secret.database_drupal8_password }}"

  server:
    installed_locally: "{{ postgres_conf.installed_locally }}"
    host: "{{ postgres_conf.host }}"
    port: 5432
    admin_user: "{{ postgres_conf.admin_user }}"
    admin_password: "{{ postgres_conf.admin_password }}"
    trusted_ip_range: 10.0.0.0/8
  databases:
    ckan:
      name: ckan_default
      owner: ckan_default
    ckan_datastore:
      name: datastore_default
      owner: ckan_default
    drupal:
      name: drupal
      owner: drupal
    drupal8:
          name: drupal8
          owner: drupal8

drupal:
  hash_salt: "{{ secret.drupal_hash_salt }}"

postgres_conf:
  installed_locally: true
  host: 127.0.0.1
  admin_user: postgres
  admin_password:


secret:
  database_ckan_password: pass
  database_ckan_datastore_password: pass
  database_drupal_password: pass
  database_drupal8_password: pass
  drupal_hash_salt: IzqME5cJk_x1ZV7oO3UXtHnM7p8R-mLVU5ZiKPWbzDQ
  smtp_user: username
  smtp_password: password

rds_domain_common_part: cnb7uthj3tqq.eu-west-1.rds.amazonaws.com


AWS:
  enabled: false
  region: S3_EU_WEST
  use_iam_role: false
  access_key: somekey
  secret_access_key: somesecret
  ckan_s3_bucket: somebucket
  smtp_server_domain: "email-smtp.eu-west-1.amazonaws.com"

debug_enabled: false

cloudwatch_agent_logs_config:
  - file_path: '/var/log/ckan/ckan-worker-bulk.log*'
    log_group_name: ckan-worker-bulk
    log_stream_name: '{local_hostname}'
    timestamp_format: '%Y-%m-%d %H:%M:%S'
    multi_line_start_pattern: '{timestamp_format}'

  - file_path: '/var/log/ckan/ckan-worker-priority.log*'
    log_group_name: ckan-worker-priority
    log_stream_name: '{local_hostname}'
    timestamp_format: '%Y-%m-%d %H:%M:%S'
    multi_line_start_pattern: '{timestamp_format}'

  - file_path: '/var/log/ckan/fetch_consumer.log*'
    log_group_name: ckan-fetch-consumer
    log_stream_name: '{local_hostname}'
    timestamp_format: '%Y-%m-%d %H:%M:%S'
    multi_line_start_pattern: '{timestamp_format}'

  - file_path: '/var/log/ckan/gather_consumer.log*'
    log_group_name: ckan-gather-consumer
    log_stream_name: '{local_hostname}'
    timestamp_format: '%Y-%m-%d %H:%M:%S'
    multi_line_start_pattern: '{timestamp_format}'

  - file_path: '/var/log/ckan/ckan.log.*'
    log_group_name: ckan
    log_stream_name: '{local_hostname}'
    timestamp_format: '%Y-%m-%d %H:%M:%S'
    multi_line_start_pattern: '{timestamp_format}'

  - file_path: '/var/log/apache2/ckan_default.custom.log*'
    log_group_name: ckan-default-custom
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%d/%b/%Y:%H:%M:%S %z]'

  - file_path: '/var/log/apache2/ckan_default.error.log*'
    log_group_name: ckan-default-error
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%d/%b/%Y:%H:%M:%S %z]'
    multi_line_start_pattern: "(?:\\[.*\\] ){5}ERROR"

  - file_path: '/var/log/apache2/datapusher.custom.log*'
    log_group_name: datapusher-custom
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%d/%b/%Y:%H:%M:%S %z]'

  - file_path: '/var/log/apache2/datapusher.error.log*'
    log_group_name: datapusher-error
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%d/%b/%Y:%H:%M:%S %z]'

  - file_path: '/var/log/apache2/access.log*'
    log_group_name: apache-access
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%d/%b/%Y:%H:%M:%S %z]'

  - file_path: '/var/log/apache2/error.log*'
    log_group_name: apache-error
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%Y-%m-%d %H:%M:%S'

  - file_path: /var/log/syslog
    log_group_name: syslog
    log_stream_name: '{local_hostname}'
    timestamp_format: '%b %d %H:%M:%S'

  - file_path: /var/log/auth.log
    log_group_name: auth
    log_stream_name: '{local_hostname}'
    timestamp_format: '%b %d %H:%M:%S'

  - file_path: /var/log/supervisor/supervisord.log
    log_group_name: supervisord
    log_stream_name: '{local_hostname}'
    timestamp_format: '%Y-%m-%d %H:%M:%S'

  - file_path: /var/log/php7.0-fpm.log
    log_group_name: php7-fpm
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%d-%b-%Y %H:%M:%S]'

  - file_path: /var/log/nginx/access.log
    log_group_name: nginx-access
    log_stream_name: '{local_hostname}'
    timestamp_format: '[%d/%b/%Y:%H:%M:%S %z]'

  - file_path: /var/log/nginx/error.log
    log_group_name: nginx-error
    log_stream_name: '{local_hostname}'
    timestamp_format: '%Y/%m/%d %H:%M:%S %z'
